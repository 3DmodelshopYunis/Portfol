<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Yunis Rehmanzada | 3D Artist Portfolio</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@300;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

    <style>
        :root {
            --bg-dark: #0f0c29;
            --gradient-main: linear-gradient(135deg, #0f0c29, #302b63, #24243e);
            --accent-purple: #8e2de2;
            --accent-blue: #4a00e0;
            --glass-bg: rgba(255, 255, 255, 0.05);
            --border-glass: rgba(255, 255, 255, 0.1);
            --text-main: #ffffff;
            --text-dim: #b0b0b0;
            --danger: #ff4b4b;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            background: var(--gradient-main);
            background-attachment: fixed;
            color: var(--text-main);
            font-family: 'Rajdhani', sans-serif;
            line-height: 1.6;
            overflow-x: hidden;
        }

        /* --- LOADING SPINNER --- */
        #loading-screen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: var(--bg-dark); z-index: 10000;
            display: flex; justify-content: center; align-items: center;
            transition: opacity 0.5s;
        }
        .spinner {
            width: 50px; height: 50px; border: 5px solid rgba(255,255,255,0.1);
            border-top: 5px solid var(--accent-purple); border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

        /* --- GATEKEEPER --- */
        #gatekeeper {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #0f0c29; z-index: 9999;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            transition: opacity 0.8s ease;
        }
        .gate-box {
            background: rgba(255,255,255,0.1); padding: 40px; border-radius: 20px;
            border: 1px solid var(--border-glass); text-align: center;
            backdrop-filter: blur(20px); animation: fadeInDown 1s ease;
        }
        @keyframes fadeInDown { from { opacity: 0; transform: translateY(-50px); } to { opacity: 1; transform: translateY(0); } }

        .gate-btn {
            background: var(--accent-purple); border: none; color: white;
            padding: 15px 30px; margin: 10px; font-size: 1.2rem; cursor: pointer;
            border-radius: 10px; transition: 0.3s; font-family: 'Rajdhani', sans-serif; font-weight: 700;
        }
        .gate-btn:hover { transform: scale(1.05); box-shadow: 0 0 20px var(--accent-purple); }
        .gate-btn.client { background: transparent; border: 2px solid var(--accent-purple); }

        #password-modal { display: none; flex-direction: column; margin-top: 20px; }
        #pass-input { padding: 10px; border-radius: 5px; border: none; margin-bottom: 10px; text-align: center; }

        /* --- MAIN UI --- */
        .hidden { display: none !important; }
        
        /* Language & Nav */
        .lang-switcher { display: flex; gap: 10px; margin-right: 20px; }
        .lang-btn { background: var(--glass-bg); border: 1px solid var(--border-glass); color: white; padding: 5px 10px; cursor: pointer; border-radius: 5px; font-weight: 700; transition: 0.3s; }
        .lang-btn:hover { background: var(--accent-purple); }

        nav { display: flex; justify-content: space-between; align-items: center; padding: 20px 8%; background: rgba(0,0,0,0.3); backdrop-filter: blur(10px); position: sticky; top: 0; z-index: 1000; border-bottom: 1px solid var(--border-glass); }
        .logo { font-size: 1.8rem; font-weight: 700; letter-spacing: 2px; background: linear-gradient(to right, #fff, var(--accent-purple)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        nav ul { display: flex; list-style: none; }
        nav ul li { margin-left: 30px; }
        nav ul li a { text-decoration: none; color: white; font-weight: 500; text-transform: uppercase; transition: 0.3s; }
        nav ul li a:hover { color: var(--accent-purple); }

        /* Sections */
        .hero { height: 80vh; display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center; }
        .hero h1 { font-size: 5rem; margin-bottom: 10px; text-transform: uppercase; letter-spacing: 5px; }
        .section { padding: 100px 10%; }
        .about-container { display: flex; gap: 50px; align-items: center; background: var(--glass-bg); padding: 40px; border-radius: 20px; border: 1px solid var(--border-glass); backdrop-filter: blur(15px); }
        
        /* Gallery */
        .model-card { background: var(--glass-bg); border: 1px solid var(--border-glass); margin-bottom: 80px; border-radius: 15px; overflow: hidden; position: relative; }
        .model-header { padding: 20px; display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid var(--border-glass); }
        .gallery-wrapper { position: relative; height: 550px; display: flex; overflow-x: auto; scroll-snap-type: x mandatory; scrollbar-width: thin; scrollbar-color: var(--accent-purple) transparent; }
        .gallery-wrapper img { flex-shrink: 0; height: 100%; min-width: 100%; object-fit: cover; scroll-snap-align: center; border-right: 1px solid var(--border-glass); }
        
        /* Admin Elements */
        .admin-controls { padding: 10px; text-align: right; background: rgba(0,0,0,0.5); }
        .btn-delete { color: var(--danger); cursor: pointer; font-weight: bold; font-size: 0.9rem; }
        #add-project-btn { display: none; position: fixed; bottom: 30px; right: 30px; background: var(--accent-purple); width: 60px; height: 60px; border-radius: 50%; font-size: 30px; color: white; border: none; cursor: pointer; box-shadow: 0 0 20px var(--accent-purple); z-index: 2000; }

        /* Modals */
        .modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 3000; display: none; justify-content: center; align-items: center; }
        .modal-box { background: #1a1a40; padding: 40px; border-radius: 15px; width: 90%; max-width: 500px; border: 1px solid var(--accent-purple); }
        .form-group { margin-bottom: 15px; }
        .form-group input, .form-group textarea, .form-group select { width: 100%; padding: 10px; background: rgba(255,255,255,0.1); border: 1px solid var(--border-glass); color: white; border-radius: 5px; }

        /* Comments */
        .comments-section { background: var(--glass-bg); padding: 40px; border-radius: 20px; border: 1px solid var(--border-glass); margin-top: 50px; }
        .stars { font-size: 1.5rem; color: gold; cursor: pointer; }
        .comment-item { background: rgba(0,0,0,0.2); padding: 20px; border-radius: 10px; margin-bottom: 15px; border-left: 3px solid var(--accent-purple); position: relative; }
        .comment-header { display: flex; justify-content: space-between; margin-bottom: 10px; }
        .comment-author { font-weight: bold; color: var(--accent-purple); }

        /* Contact & Footer */
        .contact-box { text-align: center; background: linear-gradient(to bottom, var(--glass-bg), transparent); padding: 60px; border-radius: 20px; border: 1px solid var(--border-glass); }
        .email-link { font-size: 2rem; color: #fff; text-decoration: none; border-bottom: 2px solid var(--accent-purple); transition: 0.3s; }
        .email-link:hover { color: var(--accent-purple); }
        footer { text-align: center; padding: 40px; color: var(--text-dim); }

        @media (max-width: 768px) {
            .hero h1 { font-size: 3rem; }
            .about-container { flex-direction: column; text-align: center; }
            .gallery-wrapper { height: 350px; }
            nav { flex-direction: column; gap: 15px; }
        }
    </style>
</head>
<body>

    <div id="loading-screen"><div class="spinner"></div></div>

    <div id="gatekeeper" class="hidden">
        <div class="gate-box">
            <h1>WELCOME TO REHMANZADA.3D</h1>
            <p style="margin-bottom: 30px; color: #b0b0b0;">Select Access Level</p>
            <button class="gate-btn" onclick="showPasswordInput()">TEAM MEMBER (YUNIS)</button>
            <button class="gate-btn client" onclick="enterSite('client')">CLIENT / MÜŞTƏRİ</button>
            <div id="password-modal">
                <input type="password" id="pass-input" placeholder="Enter Password">
                <div style="display: flex; gap: 10px; justify-content: center;">
                    <button class="gate-btn" style="padding: 5px 15px;" onclick="checkPassword()">ENTER</button>
                    <button class="gate-btn client" style="padding: 5px 15px; border-color: var(--danger);" onclick="cancelLogin()">CANCEL</button>
                </div>
                <p id="error-msg" style="color: var(--danger); margin-top: 10px; display: none;">Wrong Password!</p>
            </div>
        </div>
    </div>

    <div id="site-content" class="hidden">
        <nav>
            <div class="logo">REHMANZADA.3D</div>
            <div style="display: flex; align-items: center;">
                <div class="lang-switcher">
                    <button class="lang-btn" onclick="changeLang('az')">AZ</button>
                    <button class="lang-btn" onclick="changeLang('en')">EN</button>
                    <button class="lang-btn" onclick="changeLang('ru')">RU</button>
                    <button class="lang-btn" onclick="changeLang('tr')">TR</button>
                </div>
                <ul>
                    <li><a href="#home" id="nav-home">Home</a></li>
                    <li><a href="#work" id="nav-projects">Projects</a></li>
                    <li><a href="#comments" id="nav-reviews">Reviews</a></li>
                    <li><a href="#contact" id="nav-contact">Contact</a></li>
                </ul>
            </div>
        </nav>

        <section class="hero" id="home">
            <h1 id="hero-h1">THE FUTURE OF 3D</h1>
            <p id="hero-p">Hard Surface Modeling & Low Poly Environments</p>
        </section>

        <section class="section" id="about">
            <div class="about-container">
                <div class="about-text">
                    <h2 id="about-h2">About Me</h2>
                    <p id="about-p">I am a 3D Artist specializing in detailed hard-surface models.</p>
                </div>
            </div>
        </section>

        <section class="section" id="work">
            <h2 style="margin-bottom: 40px; font-size: 2rem; letter-spacing: 3px;" id="projects-h2">SELECTED WORKS</h2>
            
            <article class="model-card">
                <div class="model-header"><h3>BUGATTI DIVO (STATIC)</h3><span style="color:var(--accent-purple);">DEMO</span></div>
                <div class="gallery-wrapper">
                    <img src="divo1.jpg" alt="img"> 
                    <img src="divo2.jpg" alt="img">
                    <img src="divo3.jpg" alt="img">
                    <img src="divo4.jpg" alt="img">
                </div>
            </article>

            <div id="dynamic-projects-container"></div>
        </section>

        <section class="section" id="comments">
            <h2 id="reviews-h2">CLIENT REVIEWS</h2>
            <div class="comments-section">
                <div class="comment-form">
                    <h3 id="leave-review-h3" style="color: var(--accent-purple); margin-bottom: 15px;">Leave a Review</h3>
                    <div class="form-group"><input type="text" id="com-name" placeholder="Name / Ad"></div>
                    <div class="form-group">
                        <select id="com-category">
                            <option value="Hard Surface">Hard Surface Modeling</option>
                            <option value="Low Poly">Low Poly Environment</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <div class="stars" id="star-rating">
                            <i class="far fa-star" data-val="1"></i>
                            <i class="far fa-star" data-val="2"></i>
                            <i class="far fa-star" data-val="3"></i>
                            <i class="far fa-star" data-val="4"></i>
                            <i class="far fa-star" data-val="5"></i>
                        </div>
                    </div>
                    <div class="form-group"><textarea id="com-text" rows="3" placeholder="Feedback..."></textarea></div>
                    <button class="gate-btn" onclick="submitComment()">POST COMMENT</button>
                </div>
                <div id="comments-list"></div>
            </div>
        </section>

        <section class="section" id="contact">
            <div class="contact-box">
                <h2 id="contact-h2">Get In Touch</h2>
                <a href="mailto:yunisrehmanzada@gmail.com" class="email-link">yunisrehmanzada@gmail.com</a>
            </div>
        </section>
        <footer><p id="footer-copy">&copy; 2026 Yunis Rehmanzada.</p></footer>
    </div>

    <button id="add-project-btn" onclick="openModal()">+</button>

    <div class="modal-overlay" id="project-modal">
        <div class="modal-box">
            <h2 style="color: white; margin-bottom: 20px;">Add New Project</h2>
            <div class="form-group"><label>Title</label><input type="text" id="new-title"></div>
            <div class="form-group"><label>Category</label><input type="text" id="new-cat"></div>
            <div class="form-group"><label>Image URLs (comma separated)</label><input type="text" id="new-imgs" placeholder="link1.jpg, link2.jpg"></div>
            <div class="modal-actions">
                <button class="gate-btn client" onclick="closeModal()" style="border-color: var(--danger);">Cancel</button>
                <button class="gate-btn" onclick="addProjectFirebase()">Apply</button>
            </div>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js";
        import { getFirestore, collection, addDoc, getDocs, deleteDoc, doc, query, orderBy, onSnapshot } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";

        // --- SENIN GÖNDƏRDİYİN FIREBASE KODLARI ---
        const firebaseConfig = {
            apiKey: "AIzaSyBafeOXXvPHM-oMjstmkk2vgsxOYN-5Jks",
            authDomain: "portfolio-yunis.firebaseapp.com",
            projectId: "portfolio-yunis",
            storageBucket: "portfolio-yunis.firebasestorage.app",
            messagingSenderId: "1650727261",
            appId: "1:1650727261:web:b472a1040274eb9d29b0b4",
            measurementId: "G-DWZZTRB7N9"
        };

        // Initialize Firebase
        let db;
        try {
            const app = initializeApp(firebaseConfig);
            db = getFirestore(app);
            console.log("Firebase Connected Successfully!");
        } catch (e) {
            console.error("Firebase Connection Error:", e);
            alert("Firebase qoşulmadı. İnternet əlaqəsini yoxlayın.");
        }

        // --- GLOBAL VARIABLES FOR UI ---
        window.isAdmin = false;
        let selectedStar = 0;
        const badWords = ["stupid", "idiot", "pis", "söyüş", "bad"];

        // --- GATEKEEPER LOGIC ---
        window.showPasswordInput = () => document.getElementById('password-modal').style.display = 'flex';
        window.cancelLogin = () => {
            document.getElementById('password-modal').style.display = 'none';
            document.getElementById('pass-input').value = '';
        };

        window.checkPassword = () => {
            if(document.getElementById('pass-input').value === 'Yr142536') {
                window.isAdmin = true;
                enterSite();
            } else {
                document.getElementById('error-msg').style.display = 'block';
            }
        };

        window.enterSite = (role) => {
            document.getElementById('gatekeeper').style.opacity = '0';
            setTimeout(() => {
                document.getElementById('gatekeeper').style.display = 'none';
                document.getElementById('site-content').classList.remove('hidden');
                if(window.isAdmin) {
                    document.getElementById('add-project-btn').style.display = 'block';
                    loadProjects(); // Reload to show delete buttons
                    loadComments(); // Reload to show delete buttons
                }
            }, 800);
        };

        // --- PROJECTS LOGIC (ONLINE - FIREBASE) ---
        window.openModal = () => document.getElementById('project-modal').style.display = 'flex';
        window.closeModal = () => document.getElementById('project-modal').style.display = 'none';

        window.addProjectFirebase = async () => {
            const title = document.getElementById('new-title').value;
            const cat = document.getElementById('new-cat').value;
            const imgStr = document.getElementById('new-imgs').value;
            
            if(!title || !imgStr) return alert("Fill all fields");
            const imgs = imgStr.split(',').map(s => s.trim());

            try {
                await addDoc(collection(db, "projects"), {
                    title: title,
                    cat: cat,
                    imgs: imgs,
                    createdAt: Date.now()
                });
                closeModal();
            } catch (e) {
                console.error("Error adding project: ", e);
                alert("Error adding project: " + e.message);
            }
        };

        window.deleteProject = async (id) => {
            if(!confirm("Həmişəlik silinsin?")) return;
            await deleteDoc(doc(db, "projects", id));
        };

        function loadProjects() {
            const q = query(collection(db, "projects"), orderBy("createdAt", "desc"));
            onSnapshot(q, (snapshot) => {
                const container = document.getElementById('dynamic-projects-container');
                container.innerHTML = "";
                snapshot.forEach((doc) => {
                    const p = doc.data();
                    let imgHTML = "";
                    p.imgs.forEach(src => imgHTML += `<img src="${src}" alt="Project Image">`);
                    
                    let deleteBtn = window.isAdmin ? `<div class="admin-controls"><span class="btn-delete" onclick="deleteProject('${doc.id}')">DELETE PROJECT <i class="fas fa-trash"></i></span></div>` : "";

                    container.innerHTML += `
                    <article class="model-card">
                        ${deleteBtn}
                        <div class="model-header"><h3>${p.title}</h3><span style="color: var(--accent-purple);">${p.cat}</span></div>
                        <div class="gallery-wrapper">${imgHTML}</div>
                        <p style="padding: 15px; color: var(--text-dim); font-size: 0.9rem;">Scroll &rarr;</p>
                    </article>`;
                });
                attachScroll();
            });
        }

        // --- COMMENTS LOGIC (ONLINE - FIREBASE) ---
        document.querySelectorAll('.stars i').forEach(star => {
            star.addEventListener('click', function() {
                selectedStar = this.getAttribute('data-val');
                document.querySelectorAll('.stars i').forEach(s => {
                    s.classList.toggle('fas', s.getAttribute('data-val') <= selectedStar);
                    s.classList.toggle('far', s.getAttribute('data-val') > selectedStar);
                });
            });
        });

        window.submitComment = async () => {
            const name = document.getElementById('com-name').value;
            const cat = document.getElementById('com-category').value;
            const text = document.getElementById('com-text').value;

            if(!name || !text || selectedStar === 0) return alert("Fill all fields & stars");
            if(badWords.some(w => text.toLowerCase().includes(w))) return alert("Inappropriate language!");

            try {
                await addDoc(collection(db, "comments"), {
                    name, cat, text, stars: selectedStar, createdAt: Date.now()
                });
                document.getElementById('com-text').value = "";
                document.getElementById('com-name').value = "";
                alert("Comment sent!");
            } catch(e) {
                console.error("Error sending comment:", e);
                alert("Error sending comment. Check console.");
            }
        };

        window.deleteComment = async (id) => {
            if(!confirm("Delete comment?")) return;
            await deleteDoc(doc(db, "comments", id));
        };

        function loadComments() {
            const q = query(collection(db, "comments"), orderBy("createdAt", "desc"));
            onSnapshot(q, (snapshot) => {
                const list = document.getElementById('comments-list');
                list.innerHTML = "";
                snapshot.forEach((doc) => {
                    const c = doc.data();
                    let starsHTML = "";
                    for(let i=0; i<5; i++) starsHTML += i < c.stars ? '<i class="fas fa-star" style="color:gold;"></i>' : '<i class="far fa-star" style="color:gold;"></i>';
                    
                    let delBtn = window.isAdmin ? `<button onclick="deleteComment('${doc.id}')" style="position:absolute;top:10px;right:10px;background:none;border:none;color:red;cursor:pointer;"><i class="fas fa-trash"></i></button>` : "";

                    list.innerHTML += `
                    <div class="comment-item">
                        ${delBtn}
                        <div class="comment-header"><span class="comment-author">${c.name}</span><span style="font-size:0.8rem;background:rgba(255,255,255,0.1);padding:2px 8px;border-radius:4px;">${c.cat}</span></div>
                        <div style="margin-bottom: 5px;">${starsHTML}</div>
                        <p>${c.text}</p>
                    </div>`;
                });
            });
        }

        function attachScroll() {
            document.querySelectorAll(".gallery-wrapper").forEach(el => {
                el.addEventListener("wheel", (evt) => { if (evt.deltaY != 0) { evt.preventDefault(); el.scrollLeft += evt.deltaY; } });
            });
        }

        // Init Loading
        window.addEventListener('load', () => {
            document.getElementById('loading-screen').style.opacity = '0';
            setTimeout(() => {
                document.getElementById('loading-screen').style.display = 'none';
                document.getElementById('gatekeeper').classList.remove('hidden');
                loadProjects(); // Load immediately so data is ready
                loadComments();
            }, 500);
        });

        // Language
        window.langData = {
            az: { "nav-home": "Ana Səhifə", "nav-projects": "Layihələr", "nav-reviews": "Rəylər", "nav-contact": "Əlaqə", "hero-h1": "3D-NİN GƏLƏCƏYİ", "projects-h2": "SEÇİLMİŞ İŞLƏR", "reviews-h2": "MÜŞTƏRİ RƏYLƏRİ", "contact-h2": "Əlaqə Saxla" },
            en: { "nav-home": "Home", "nav-projects": "Projects", "nav-reviews": "Reviews", "nav-contact": "Contact", "hero-h1": "THE FUTURE OF 3D", "projects-h2": "SELECTED WORKS", "reviews-h2": "CLIENT REVIEWS", "contact-h2": "Get In Touch" },
            ru: { "nav-home": "Главная", "nav-projects": "Проекты", "nav-reviews": "Отзывы", "nav-contact": "Контакты", "hero-h1": "БУДУЩЕЕ 3D", "projects-h2": "ИЗБРАННЫЕ РАБОТЫ", "reviews-h2": "ОТЗЫВЫ КЛИЕНТОВ", "contact-h2": "Связаться" },
            tr: { "nav-home": "Anasayfa", "nav-projects": "Projeler", "nav-reviews": "Yorumlar", "nav-contact": "İletişim", "hero-h1": "3D'NİN GELECEĞİ", "projects-h2": "SEÇİLMİŞ İŞLER", "reviews-h2": "MÜŞTERİ YORUMLARI", "contact-h2": "İletişime Geç" }
        };
        window.changeLang = (lang) => { for(let k in window.langData[lang]) if(document.getElementById(k)) document.getElementById(k).innerText = window.langData[lang][k]; };
    </script>
</body>
</html>
